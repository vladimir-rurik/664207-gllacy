!function(){var e=document.querySelector("#map");if(e){ymaps.ready(function(){var e=new ymaps.Map("map",{center:[59.93935341,30.32937631],zoom:16,controls:[]});e.geoObjects.add(new ymaps.Placemark([59.938631,30.323055],{hintContent:document.querySelector(".contact-info-address").innerHTML.split(":")[0],balloonContent:document.querySelector(".contact-info").innerHTML.split('<a class="btn')[0]},{iconLayout:"default#image",iconImageHref:"img/icon/map-marker.svg",iconShadow:!0,iconShadowImageHref:"img/background/map-marker-shadow.png",iconImageSize:[80,140],iconShadowImageSize:[182,110],iconImageOffset:[-40,-143],iconShadowImageOffset:[-5,-111]})),e.controls.add("zoomControl",{size:"small",position:{bottom:50,left:10}}),e.behaviors.disable("scrollZoom")})}for(var t=document.querySelector(".sub-menu"),o=t.querySelectorAll("a"),r=o.length,a=0;a<r;a++)o[a].addEventListener("focus",function(){t.classList.add("js-drop-down")});document.querySelector("#catalogue-menu-item > a").addEventListener("focus",function(){t.classList.toggle("js-drop-down")}),document.querySelector("#delivery-and-payment").addEventListener("focus",function(){t.classList.remove("js-drop-down")}),document.addEventListener("mousedown",function(e){t.classList.remove("js-drop-down")});var s=document.querySelector("#search .user-nav-btn");s.addEventListener("mouseover",function(e){s.hasAttribute("href")&&s.removeAttribute("href")}),s.addEventListener("mouseout",function(e){s.setAttribute("href","#search")});var n=document.querySelector("#search form"),l=document.querySelector("#search-field");n.addEventListener("submit",function(e){e.preventDefault(),l.value=l.value.trim(),l.value&&n.submit()});var c=/.+@.+\..+/i,u=!0,i=document.querySelector("#login .user-nav-btn");i.addEventListener("mouseover",function(e){i.hasAttribute("href")&&i.removeAttribute("href");try{d.value||(d.value=localStorage.getItem("mail")),m.value||(m.value=localStorage.getItem("pwd"))}catch(e){u=!1}d.value?m.focus():d.focus()}),i.addEventListener("mouseout",function(e){i.setAttribute("href","#login")});var d=document.querySelector("#login-mail");d.addEventListener("blur",function(e){d.value=d.value.trim(),v.classList.contains("js-modal-error")&&v.classList.remove("js-modal-error")});var m=document.querySelector("#login-pwd");m.addEventListener("blur",function(e){m.value=m.value.trim()});var v=document.querySelector("#login form");v.addEventListener("submit",function(e){e.preventDefault(),d.value&&c.test(d.value)?(u&&(localStorage.setItem("mail",d.value),localStorage.setItem("pwd",m.value)),v.submit(),v.classList.contains("js-modal-error")&&v.classList.remove("js-modal-error")):(v.classList.add("js-modal-error"),d.value="",d.focus())}),v.addEventListener("keydown",function(e){27===e.keyCode&&v.classList.contains("js-modal-error")&&v.classList.remove("js-modal-error")});var f,L=document.querySelector("#shopping-cart .user-nav-btn");L.hasAttribute("href")&&(f=!0),f&&(L.addEventListener("mouseover",function(e){L.removeAttribute("href")}),L.addEventListener("mouseout",function(e){L.setAttribute("href","#shopping-cart")}));var b=document.querySelector(".news-subscribe form");if(b){var g=document.querySelector("#mail-subscribe");try{g.value=localStorage.getItem("mail")}catch(e){u=!1}g.addEventListener("blur",function(e){g.value=g.value.trim(),b.classList.contains("js-modal-error")&&b.classList.remove("js-modal-error")}),b.addEventListener("submit",function(e){e.preventDefault(),g.value&&c.test(g.value)?(b.submit(),b.classList.contains("js-modal-error")&&b.classList.remove("js-modal-error")):(b.classList.add("js-modal-error"),g.value="",g.focus())})}var S=document.querySelector("#feedback"),y=document.querySelector("#feedback form"),h=document.querySelector("#feedback-name"),j=document.querySelector("#feedback-mail"),p=document.querySelector("#feedback-text");if(e){var E=document.querySelector("#map .btn");E.addEventListener("mouseover",function(e){E.removeAttribute("href")}),E.addEventListener("mouseout",function(e){E.setAttribute("href","#feedback")}),E.addEventListener("click",function(e){try{S.classList.add("js-modal"),h.value=localStorage.getItem("name"),j.value=localStorage.getItem("mail"),p.value=localStorage.getItem("text")}catch(e){u=!1}h.value?j.value?p.focus():j.focus():h.focus()})}h.addEventListener("blur",function(e){h.value=h.value.trim()}),j.addEventListener("blur",function(e){j.value=j.value.trim(),y.classList.contains("js-modal-error")&&y.classList.remove("js-modal-error")}),p.addEventListener("blur",function(e){p.value=p.value.trim()}),y.addEventListener("submit",function(e){e.preventDefault(),j.value&&c.test(j.value)?(u&&(localStorage.setItem("name",h.value),localStorage.setItem("text",p.value)),y.submit(),y.classList.contains("js-modal-error")&&y.classList.remove("js-modal-error"),S.classList.remove("js-modal")):(y.classList.add("js-modal-error"),j.value="",j.focus())}),y.addEventListener("keydown",function(e){27===e.keyCode&&(y.classList.contains("js-modal-error")&&y.classList.remove("js-modal-error"),S.classList.remove("js-modal"))}),document.querySelector(".modal-close").addEventListener("click",function(e){e.preventDefault(),y.classList.contains("js-modal-error")&&y.classList.remove("js-modal-error"),S.classList.remove("js-modal")})}();
